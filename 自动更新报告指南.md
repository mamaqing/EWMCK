# 自动更新认知评估报告指南

## 功能概述

我们已经实现了以下功能：

1. **分数变化自动检测**：当您修改任何维度的分数时，系统会自动检测到变化
2. **自动生成报告图片**：系统会在分数变化后1秒自动生成最新的报告图片
3. **手动生成报告**：您可以使用界面上的按钮手动生成和保存报告图片
4. **自动上传到GitHub**：提供了自动上传脚本，可一键将报告图片上传到GitHub

## 使用步骤

### 1. 修改分数

使用界面上的滑块修改各个维度的分数，系统会自动检测到变化并生成最新的报告图片。

### 2. 生成二维码

点击"生成二维码"按钮，系统会显示指向GitHub Pages上报告图片的二维码。

### 3. 查看最新报告

扫描二维码即可查看最新的认知评估报告。

## 自动上传图片到GitHub

### 使用方式

1. **手动生成并上传**：
   ```bash
   npm run generate-and-upload
   ```
   此命令会重新构建项目并上传最新的报告图片。

2. **仅上传现有图片**：
   ```bash
   npm run upload-report
   ```
   此命令会直接上传已存在的报告图片。

### 上传脚本功能

上传脚本(`upload-report.js`)会执行以下操作：

1. 检查报告图片是否存在
2. 将图片复制到`docs/报告图片/`目录
3. 使用git将图片添加到暂存区
4. 提交更改并推送至GitHub仓库

## 注意事项

1. **网络连接**：上传到GitHub需要稳定的网络连接，如果遇到网络问题，请稍后重试
2. **图片生成**：分数变化后，系统会在1秒后自动生成图片
3. **二维码更新**：二维码指向的是GitHub Pages上的图片，上传成功后需要等待GitHub Pages更新(通常需要几分钟)
4. **本地预览**：您可以在本地预览服务器上查看最新的报告内容

## 故障排除

### 上传失败

如果上传失败，请检查：
1. 网络连接是否正常
2. Git配置是否正确
3. 图片文件是否存在于`报告图片/认知评估报告.png`

### 二维码显示旧报告

如果二维码显示旧报告：
1. 确保已执行上传命令
2. 等待GitHub Pages更新(通常需要几分钟)
3. 刷新页面后重新生成二维码

## 技术说明

- 报告图片生成使用`html2canvas`库
- 二维码生成使用`qrcode.react`库
- 上传脚本使用Node.js实现，依赖Git命令
- 项目使用Vite构建，部署到GitHub Pages